---
import ProjectCard from '@/components/project/ProjectCard.astro';
import BaseLayout from '@/layouts/BaseLayout.astro';
import { Image } from '@astrojs/image/components';
import { fetchPosts } from '@/utils/content';
import CustomLink from '@/components/common/CustomLink.astro';

const trimArray = (array, size) => {
  const newArray = [];
  for (let i = 0; i < size; i++) {
    newArray.push(array[i]);
  }
  return newArray;
};

const posts = await fetchPosts('project');
const smallArray = trimArray(posts, 3);
---

<BaseLayout>
  <article class="mb-8 space-y-6">
    <div class="flex flex-col-reverse items-start justify-between sm:flex-row">
      <div class="space-y-4 sm:pr-20">
        <h1>Alexandru-È˜tefan Stan</h1>
        <p class="h4 font-medium">Full-stack Development Enthusiast</p>
        <p class="text-lg">
          I&apos;m an aspiring Full-Stack Developer from ðŸ‡·ðŸ‡´, dedicated to creating engaging web
          applications and websites using cutting-edge technologies. I find immense satisfaction in
          seeing my code being acknowledged and valued.
        </p>
      </div>
      <div class="flex shrink-0 flex-col gap-4 rounded-full p-[2px]">
        <Image
          alt="Portrait"
          height={180}
          width={180}
          quality={100}
          src="./src/assets/images/portrait.webp"
          format="webp"
          class="rounded-full"
        />
      </div>
    </div>
    <div class="space-y-4">
      <h2>Latest projects</h2>
      <p>
        These are some personal projects I have been working on to learn more about different
        libraries and browser APIs.
      </p>
    </div>
    <div class="w-40">
      <CustomLink href="/project">View All Projects</CustomLink>
    </div>
  </article>
  <div class="grid grid-cols-1 gap-4">
    {smallArray.map((project) => <ProjectCard {...project} />)}
  </div>
</BaseLayout>
